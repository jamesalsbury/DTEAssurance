[{"path":"https://jamesalsbury.github.io/DTEAssurance/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 DTEAssurance authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"James Salsbury. Author, maintainer.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Salsbury J (2025). DTEAssurance: Assurance Methods Clinical Trials Delayed Treatment Effect. R package version 1.0.1, https://jamesalsbury.github.io/DTEAssurance/.","code":"@Manual{,   title = {DTEAssurance: Assurance Methods for Clinical Trials with a Delayed Treatment Effect},   author = {James Salsbury},   year = {2025},   note = {R package version 1.0.1},   url = {https://jamesalsbury.github.io/DTEAssurance/}, }"},{"path":[]},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"dteassurance","dir":"","previous_headings":"","what":"DTEAssurance","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"DTEAssurance R package implementing assurance methodology design clinical trials anticipated delayed treatment effect (DTE). uses elicited prior distributions—via SHELF framework—delay duration post-delay hazard ratio, simulates operating characteristics inform trial design. methodology based following papers: Salsbury JA, Oakley JE, Julious SA, Hampson LV.Assurance methods designing clinical trial delayed treatment effect.Statistics Medicine, 2024; 43(19): 3595–3612. doi:10.1002/sim.10136 Salsbury JA, Oakley JE, Julious SA, Hampson LV.Adaptive clinical trial design delayed treatment effects using elicited prior distributions.arXiv preprint, 2025; arXiv:2509.07602 [revision Pharmaceutical Statistics]","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"can install DTEAssurance GitHub using: accepted CRAN, ’ll able install :","code":"# Install from GitHub devtools::install_github(\"jamesalsbury/DTEAssurance\") #> Using GitHub PAT from the git credential store. #> Skipping install of 'DTEAssurance' from a github remote, the SHA1 (da7dd954) has not changed since last install. #>   Use `force = TRUE` to force installation library(DTEAssurance) install.packages(\"DTEAssurance\") #> Warning: package 'DTEAssurance' is in use and will not be installed"},{"path":[]},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"shiny-app","dir":"","previous_headings":"Assurance Methods for Delayed Treatment Effects","what":"Shiny App","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"Launch interactive app explore assurance delayed treatment effects:","code":"DTEAssurance::assurance_shiny_app()"},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"offline-example","dir":"","previous_headings":"Assurance Methods for Delayed Treatment Effects","what":"Offline Example","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"can also use package offline via main function: function requires following arguments: n_c: Number patients control group n_t: Number patients treatment group control_model: named list specifying control arm survival distribution effect_model: named list specifying beliefs treatment effect censoring_model: named list specifying censoring mechanism recruitment_model: named list specifying recruitment process analysis_model: named list specifying statistical test decision rule n_sims: Number simulations run example shown: can vary sample sizes plot resulting output:","code":"DTEAssurance::calc_dte_assurance() control_model <- list(dist = \"Exponential\", parameter_mode = \"Fixed\", fixed_type = \"Parameters\", lambda = 0.1) effect_model <- list(delay_SHELF = SHELF::fitdist(c(3, 4, 5), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 10), delay_dist = \"gamma\", HR_SHELF = SHELF::fitdist(c(0.55, 0.6, 0.7), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 1.5), HR_dist = \"gamma\", P_S = 1, P_DTE = 0) censoring_model <- list(method = \"Time\", time = 12) recruitment_model <- list(method = \"power\", period = 12, power = 1) analysis_model <- list(method = \"LRT\", alpha = 0.025, alternative_hypothesis = \"one.sided\") result <- calc_dte_assurance(n_c = 300, n_t = 300,                              control_model = control_model,                              effect_model = effect_model,                              censoring_model = censoring_model,                              recruitment_model = recruitment_model,                              analysis_model = analysis_model,                              n_sims = 100)  str(result) #> List of 4 #>  $ assurance  : num 0.83 #>  $ CI         : num [1, 1:2] 0.742 0.898 #>  $ duration   : num 12 #>  $ sample_size: num 600 result <- calc_dte_assurance(n_c = seq(50, 500, by = 50),                              n_t = seq(50, 500, by = 50),                              control_model = control_model,                              effect_model = effect_model,                              censoring_model = censoring_model,                              recruitment_model = recruitment_model,                              analysis_model = analysis_model,                              n_sims = 500)"},{"path":[]},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"shiny-app-1","dir":"","previous_headings":"Assurance for DTE - With Group Sequential Designs","what":"Shiny App","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"Launch interactive shiny app explore assurance delayed treatment effects using group sequential designs:","code":"DTEAssurance::assurance_GSD_shiny_app()"},{"path":"https://jamesalsbury.github.io/DTEAssurance/index.html","id":"offline-example-1","dir":"","previous_headings":"Assurance for DTE - With Group Sequential Designs","what":"Offline Example","title":"Assurance Methods for Clinical Trials with a Delayed Treatment Effect","text":"can also use package offline via main function: function requires following arguments: n_c: Number patients control group n_t: Number patients treatment group control_model: named list specifying control arm survival distribution effect_model: named list specifying beliefs treatment effect recruitment_model: named list specifying recruitment process GSD_model: named list specifying group sequential design n_sims: Number simulations run example shown: wish compare operating characteristics can changing GSD_model plotting proportion outcomes:","code":"DTEAssurance::calc_dte_assurance_interim() control_model <- list(dist = \"Exponential\", parameter_mode = \"Fixed\", fixed_type = \"Parameters\", lambda = 0.08) effect_model <- list(delay_SHELF = SHELF::fitdist(c(3, 4, 5), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 10), delay_dist = \"gamma\", HR_SHELF = SHELF::fitdist(c(0.55, 0.6, 0.7), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 1.5), HR_dist = \"gamma\", P_S = 0.9, P_DTE = 0.7) recruitment_model <- list(method = \"power\", period = 12, power = 1) GSD_model <- list(events = 450, alpha_spending = c(\"0.01, 0.025\"),                   beta_spending = c(\"0.05, 0.1\"), IF_vec = c(\"0.5, 1\")) result <- calc_dte_assurance_interim(n_c = 300, n_t = 300,                              control_model = control_model,                              effect_model = effect_model,                              recruitment_model = recruitment_model,                              GSD_model = GSD_model,                              n_sims = 500)  str(result) #> 'data.frame':    500 obs. of  6 variables: #>  $ Trial         : int  1 2 3 4 5 6 7 8 9 10 ... #>  $ IF            : chr  \"0.5, 1\" \"0.5, 1\" \"0.5, 1\" \"0.5, 1\" ... #>  $ Decision      : chr  \"Successful at final\" \"Stop for efficacy\" \"Stop for futility\" \"Stop for futility\" ... #>  $ StopTime      : num  27.1 13.6 12.5 12.9 13.7 ... #>  $ SampleSize    : int  600 600 600 600 600 600 600 600 600 600 ... #>  $ Final_Decision: chr  \"Successful\" \"Successful\" \"Successful\" \"Successful\" ... GSD_model <- list(events = 450,                    alpha_spending = c(\"0.01, 0.025\", \"0.01, 0.025\", \"0.01, 0.025\"),                   beta_spending = c(\"0.05, 0.1\", \"0.05, 0.1\", \"0.05, 0.1\"),                    IF_vec = c(\"0.25, 1\", \"0.5, 1\", \"0.75, 1\"))  result <- calc_dte_assurance_interim(n_c = 300, n_t = 300,                              control_model = control_model,                              effect_model = effect_model,                              recruitment_model = recruitment_model,                              GSD_model = GSD_model,                              n_sims = 500)"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/BPP_func.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","title":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","text":"Calculate Bayesian Predictive Probability given interim data posterior samples","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/BPP_func.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","text":"","code":"BPP_func(   df,   posterior_df,   n_c_planned,   n_t_planned,   rec_time_planned,   df_cens_time,   censoring_model,   analysis_model,   n_sims = 1000 )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/BPP_func.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","text":"df data frame containing interim survival data, censored df_cens_time, columns: time Final observed/event time interim (analysis time scale). group Treatment group indicator (e.g. \"Control\", \"Treatment\"). rec_time Recruitment (calendar) time. pseudo_time time + rec_time (calendar time event/censoring). status Event indicator interim (1 = event, 0 = censored). survival_time Observed follow-time randomisation event/censoring interim. posterior_df data frame posterior samples columns: lambda_c, delay_time HR, corresponding control hazard, delay (changepoint) time post-delay hazard ratio, respectively. n_c_planned Planned maximum number patients control group. n_t_planned Planned maximum number patients treatment group. rec_time_planned Planned maximum recruitment calendar time full trial. df_cens_time Calendar time df censored (interim analysis time). censoring_model named list specifying censoring mechanism future data: method: one \"Time\", \"Events\", \"\". time, events, : parameters corresponding method. analysis_model named list specifying final analysis decision rule: method: e.g. \"LRT\", \"WLRT\", \"MW\". alpha: one-sided type error level. alternative_hypothesis: direction alternative (e.g. \"one.sided\"). rho, gamma, t_star, s_star: additional parameters WLRT MW (applicable). n_sims Number predictive simulations run (default 1000).","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/BPP_func.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","text":"single numeric value giving Bayesian predictive probability success final analysis specified design, censoring model analysis model.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/BPP_func.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Bayesian Predictive Probability given interim data and posterior samples — BPP_func","text":"","code":"if (FALSE) { # \\dontrun{   BPP_func(df, posterior_df, n_c_planned = 500, n_t_planned = 500,            rec_time_planned = 34, df_cens_time = 20,            censoring_model = list(method = \"Events\", events = 1200),            analysis_model = list(method = \"LRT\",                                  alpha = 0.025,                                  alternative_hypothesis = \"one.sided\")) } # }"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/INTEREST.html","id":null,"dir":"Reference","previous_headings":"","what":"INTEREST data set — INTEREST","title":"INTEREST data set — INTEREST","text":"reconstructed survival data set INTEREST clinical trial","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/INTEREST.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"INTEREST data set — INTEREST","text":"","code":"INTEREST"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/INTEREST.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"INTEREST data set — INTEREST","text":"data frame 710 rows 2 variables: Survival time Survival Time (months) Status Event indicator (0=Alive, 1=Dead)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/INTEREST.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"INTEREST data set — INTEREST","text":"Reconstructed survival data set following publication: https://www.sciencedirect.com/science/article/pii/S0140673608617584?via%3Dihub","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/MCMC_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"MCMC_sample — MCMC_sample","title":"MCMC_sample — MCMC_sample","text":"MCMC sample example given Salsbury et al (2024)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/MCMC_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MCMC_sample — MCMC_sample","text":"","code":"MCMC_sample"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/MCMC_sample.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"MCMC_sample — MCMC_sample","text":"data frame 100000 rows 1 variables: x Sample MAP prior","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/MCMC_sample.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"MCMC_sample — MCMC_sample","text":"MCMC sample control group example given https://onlinelibrary.wiley.com/doi/full/10.1002/sim.10136. Three historical data seta used generate Meta-Analytic-Predictive Prior distribution","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/REVEL.html","id":null,"dir":"Reference","previous_headings":"","what":"REVEL data set — REVEL","title":"REVEL data set — REVEL","text":"reconstructed survival data set REVEL clinical trial","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/REVEL.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"REVEL data set — REVEL","text":"","code":"REVEL"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/REVEL.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"REVEL data set — REVEL","text":"data frame 625 rows 2 variables: Survival time Survival Time (months) Status Event indicator (0=Alive, 1=Dead)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/REVEL.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"REVEL data set — REVEL","text":"Reconstructed survival data set following publication: https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(14)60845-X/fulltext","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/ZODIAC.html","id":null,"dir":"Reference","previous_headings":"","what":"ZODIAC data set — ZODIAC","title":"ZODIAC data set — ZODIAC","text":"reconstructed survival data set ZODIAC clinical trial","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/ZODIAC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ZODIAC data set — ZODIAC","text":"","code":"ZODIAC"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/ZODIAC.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"ZODIAC data set — ZODIAC","text":"data frame 697 rows 2 variables: Survival time Survival Time (months) Status Event indicator (0=Alive, 1=Dead)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/ZODIAC.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"ZODIAC data set — ZODIAC","text":"Reconstructed survival data set following publication: https://www.sciencedirect.com/science/article/abs/pii/S1470204510701327?via%3Dihub","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/add_recruitment_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Add recruitment time to a survival dataset — add_recruitment_time","title":"Add recruitment time to a survival dataset — add_recruitment_time","text":"Simulates recruitment timing subject survival dataset using either power model piecewise constant (PWC) model. function appends recruitment times pseudo survival times (time recruitment event censoring).","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/add_recruitment_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add recruitment time to a survival dataset — add_recruitment_time","text":"","code":"add_recruitment_time(   data,   rec_method,   rec_period = NULL,   rec_power = NULL,   rec_rate = NULL,   rec_duration = NULL )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/add_recruitment_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add recruitment time to a survival dataset — add_recruitment_time","text":"data dataframe containing survival data columns: time, status, group rec_method Recruitment method: \"power\" power model \"PWC\" piecewise constant model rec_period Period length power model rec_power Power parameter power model rec_rate Comma-separated string recruitment rates PWC model rec_duration Comma-separated string durations corresponding rate PWC model","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/add_recruitment_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add recruitment time to a survival dataset — add_recruitment_time","text":"dataframe two additional columns: rec_time Simulated recruitment time subject pseudo_time Time recruitment event censoring Class: data.frame","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/add_recruitment_time.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add recruitment time to a survival dataset — add_recruitment_time","text":"","code":"set.seed(123) df <- data.frame(   time = rexp(20, rate = 0.1),   status = rbinom(20, 1, 0.8),   group = rep(c(\"Control\", \"Treatment\"), each = 10) ) recruited <- add_recruitment_time(df, rec_method = \"power\", rec_period = 12, rec_power = 1) head(recruited) #>         time status   group  rec_time pseudo_time #> 1  8.4345726      1 Control  2.478377   10.912949 #> 2  5.7661027      1 Control  1.530380    7.296483 #> 3 13.2905487      1 Control  9.039694   22.330243 #> 4  0.3157736      1 Control 10.740544   11.056318 #> 5  0.5621098      1 Control  4.493553    5.055663 #> 6  3.1650122      1 Control  7.981382   11.146394"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_GSD_shiny_app.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch the 'shiny' GSD Assurance app — assurance_GSD_shiny_app","title":"Launch the 'shiny' GSD Assurance app — assurance_GSD_shiny_app","text":"Launches 'shiny' application simulate group sequential trials delayed treatment effects (DTE) using elicited prior distributions. app allows interactive exploration trial designs assurance calculations.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_GSD_shiny_app.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch the 'shiny' GSD Assurance app — assurance_GSD_shiny_app","text":"","code":"assurance_GSD_shiny_app()"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_GSD_shiny_app.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch the 'shiny' GSD Assurance app — assurance_GSD_shiny_app","text":"return value, called side effects (invisibly returns NULL). function launches interactive 'shiny' application.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_GSD_shiny_app.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch the 'shiny' GSD Assurance app — assurance_GSD_shiny_app","text":"","code":"if (interactive()) {   # Launch the interactive app in an R session   assurance_GSD_shiny_app() }"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_shiny_app.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch the 'shiny' Assurance app — assurance_shiny_app","title":"Launch the 'shiny' Assurance app — assurance_shiny_app","text":"Launches 'shiny' application calculate assurance clinical trials delayed treatment effects (DTE) may present. app allows elicitation prior distributions calculates assurance metrics.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_shiny_app.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch the 'shiny' Assurance app — assurance_shiny_app","text":"","code":"assurance_shiny_app()"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_shiny_app.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch the 'shiny' Assurance app — assurance_shiny_app","text":"return value, called side effects (invisibly returns NULL). function launches interactive 'shiny' application.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/assurance_shiny_app.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch the 'shiny' Assurance app — assurance_shiny_app","text":"","code":"if (interactive()) {   # Launch the interactive app in an R session   assurance_shiny_app() }"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","title":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","text":"Simulates operating characteristics clinical trial prior uncertainty delayed treatment effect. function integrates beliefs control survival, treatment delay, post-delay hazard ratio, recruitment, censoring, analysis method estimate assurance trial metrics.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","text":"","code":"calc_dte_assurance(   n_c,   n_t,   control_model,   effect_model,   censoring_model,   recruitment_model,   analysis_model,   n_sims = 1000 )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","text":"n_c Vector control group sample sizes n_t Vector treatment group sample sizes control_model named list specifying control arm survival distribution: dist: Distribution type (\"Exponential\" \"Weibull\") parameter_mode: Either \"Fixed\" \"Distribution\" fixed_type: \"Fixed\", specify \"Parameters\" \"Landmark\" lambda, gamma: Scale shape parameters t1, t2: Landmark times surv_t1, surv_t2: Survival probabilities landmarks t1_Beta_a, t1_Beta_b, diff_Beta_a, diff_Beta_b: Beta prior parameters effect_model named list specifying beliefs treatment effect: delay_SHELF, HR_SHELF: SHELF objects encoding beliefs delay_dist, HR_dist: Distribution types (\"hist\" default) P_S: Probability survival curves separate P_DTE: Probability delayed separation, conditional separation censoring_model named list specifying censoring mechanism: method: \"Time\", \"Events\", \"\" time, events, : Parameters method recruitment_model named list specifying recruitment process: method: \"power\" \"PWC\" period, power: Parameters power model rate, duration: Comma-separated strings PWC model analysis_model named list specifying statistical test decision rule: method: \"LRT\", \"WLRT\", \"MW\" alpha, alternative_hypothesis: Type error hypothesis direction rho, gamma, t_star, s_star: Parameters WLRT MW success_threshold_HR: Optional threshold declaring success n_sims Number simulations run (default = 1000)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","text":"named list containing: assurance Estimated assurance (probability success prior uncertainty) CI 95% confidence interval assurance duration Mean trial duration across simulations sample_size Mean sample size across simulations diagnostics Additional diagnostics success_threshold_HR specified Class: list","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Assurance for a Trial with a Delayed Treatment Effect — calc_dte_assurance","text":"","code":"# Minimal example with placeholder inputs control_model <- list(dist = \"Exponential\", parameter_mode = \"Fixed\", fixed_type = \"Parameters\", lambda = 0.1) effect_model <- list(delay_SHELF = SHELF::fitdist(c(3, 4, 5), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 10), delay_dist = \"gamma\", HR_SHELF = SHELF::fitdist(c(0.55, 0.6, 0.7), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 1.5), HR_dist = \"gamma\", P_S = 1, P_DTE = 0) censoring_model <- list(method = \"Time\", time = 12) recruitment_model <- list(method = \"power\", period = 12, power = 1) analysis_model <- list(method = \"LRT\", alpha = 0.025, alternative_hypothesis = \"two.sided\") result <- calc_dte_assurance(n_c = 300, n_t = 300,                                      control_model = control_model,                                      effect_model = effect_model,                                      censoring_model = censoring_model,                                      recruitment_model = recruitment_model,                                      analysis_model = analysis_model,                                      n_sims = 10) str(result) #> List of 4 #>  $ assurance  : num 0.9 #>  $ CI         : num [1, 1:2] 0.555 0.997 #>  $ duration   : num 12 #>  $ sample_size: num 600"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance_interim.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","title":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","text":"Simulates assurance operating characteristics group sequential trial prior uncertainty delayed treatment effect. function integrates beliefs control survival, treatment delay, post-delay hazard ratio, recruitment, group sequential design (GSD) parameters.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance_interim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","text":"","code":"calc_dte_assurance_interim(   n_c,   n_t,   control_model,   effect_model,   recruitment_model,   GSD_model,   n_sims = 1000 )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance_interim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","text":"n_c Control group sample size n_t Treatment group sample size control_model named list specifying control arm survival distribution: dist: Distribution type (\"Exponential\" \"Weibull\") parameter_mode: Either \"Fixed\" \"Distribution\" fixed_type: \"Fixed\", specify \"Parameters\" \"Landmark\" lambda, gamma: Scale shape parameters t1, t2: Landmark times surv_t1, surv_t2: Survival probabilities landmarks t1_Beta_a, t1_Beta_b, diff_Beta_a, diff_Beta_b: Beta prior parameters effect_model named list specifying beliefs treatment effect: delay_SHELF, HR_SHELF: SHELF objects encoding beliefs delay_dist, HR_dist: Distribution types (\"hist\" default) P_S: Probability survival curves separate P_DTE: Probability delayed separation, conditional separation recruitment_model named list specifying recruitment process: method: \"power\" \"PWC\" period, power: Parameters power model rate, duration: Comma-separated strings PWC model GSD_model named list specifying group sequential design: events: Total number events alpha_spending: Cumulative alpha spending vector beta_spending: Cumulative beta spending vector IF_vec: Vector information fractions n_sims Number simulations run (default = 1000)","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance_interim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","text":"data frame one row per simulated trial following columns: Trial Simulation index Information fraction label used decision point Decision Interim decision outcome (e.g., \"Continue\", \"Stop efficacy\", \"Stop futility\") StopTime Time trial stopped completed SampleSize Total sample size time decision Final_Decision Final classification trial success based test statistic threshold Class: data.frame","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/calc_dte_assurance_interim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculates operating characteristics for a Group Sequential Trial with a Delayed Treatment Effect — calc_dte_assurance_interim","text":"","code":"# Minimal example with placeholder inputs control_model <- list(dist = \"Exponential\", parameter_mode = \"Fixed\", fixed_type = \"Parameters\", lambda = 0.1) effect_model <- list(P_S = 1, P_DTE = 0, HR_SHELF = SHELF::fitdist(c(0.6, 0.65, 0.7), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 2), HR_dist = \"gamma\", delay_SHELF = SHELF::fitdist(c(3, 4, 5), probs = c(0.25, 0.5, 0.75), lower = 0, upper = 10), delay_dist = \"gamma\" ) recruitment_model <- list(method = \"power\", period = 12, power = 1) GSD_model <- list(events = 300, alpha_spending = c(\"0.01, 0.025\"),                   beta_spending = c(\"0.05, 0.1\"), IF_vec = c(\"0.5, 1\")) result <- calc_dte_assurance_interim(n_c = 300, n_t = 300,                         control_model = control_model,                         effect_model = effect_model,                         recruitment_model = recruitment_model,                         GSD_model = GSD_model,                         n_sims = 10) str(result) #> 'data.frame':\t10 obs. of  6 variables: #>  $ Trial         : int  1 2 3 4 5 6 7 8 9 10 #>  $ IF            : chr  \"0.5, 1\" \"0.5, 1\" \"0.5, 1\" \"0.5, 1\" ... #>  $ Decision      : chr  \"Stop for efficacy\" \"Stop for efficacy\" \"Stop for efficacy\" \"Stop for efficacy\" ... #>  $ StopTime      : num  9.76 9.8 9.94 9.49 9.16 ... #>  $ SampleSize    : int  492 486 489 458 477 452 506 508 600 485 #>  $ Final_Decision: chr  \"Successful\" \"Successful\" \"Successful\" \"Successful\" ..."},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/cens_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Censor a survival dataset — cens_data","title":"Censor a survival dataset — cens_data","text":"Applies administrative censoring survival dataset using one three methods: fixed time, fixed number events, fixed information fraction. input data must contain columns pseudo survival time, recruitment time, observed time.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/cens_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Censor a survival dataset — cens_data","text":"","code":"cens_data(   data,   cens_method = \"Time\",   cens_time = NULL,   cens_IF = NULL,   cens_events = NULL )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/cens_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Censor a survival dataset — cens_data","text":"data dataframe containing uncensored survival data columns: pseudo_time, rec_time, time cens_method Censoring method: \"Time\" (default), \"Events\", \"\" cens_time Time point censoring (required cens_method = \"Time\") cens_IF Information fraction censoring (required cens_method = \"\") cens_events Number events censoring (required cens_method = \"Events\")","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/cens_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Censor a survival dataset — cens_data","text":"list containing: data Censored dataframe updated status filtered rows cens_events Number events used censoring (applicable) cens_time Time point used censoring sample_size Number subjects remaining censoring","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/cens_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Censor a survival dataset — cens_data","text":"","code":"set.seed(123) df <- data.frame(   pseudo_time = rexp(20, rate = 0.1),   rec_time = runif(20, 0, 12),   time = rexp(20, rate = 0.1) ) censored <- cens_data(df, cens_method = \"Time\", cens_time = 10) str(censored) #> List of 4 #>  $ data       :'data.frame':\t19 obs. of  6 variables: #>   ..$ pseudo_time  : num [1:19] 0.292 0.316 0.562 1.453 2.81 ... #>   ..$ rec_time     : num [1:19] 1.83 3.82 2.78 4.96 5.59 ... #>   ..$ time         : num [1:19] 5.89 2.6 25.97 6.29 72.11 ... #>   ..$ status       : int [1:19] 1 1 1 1 1 1 1 1 1 1 ... #>   ..$ enrolled     : logi [1:19] TRUE TRUE TRUE TRUE TRUE TRUE ... #>   ..$ survival_time: num [1:19] 5.89 2.6 25.97 6.29 72.11 ... #>  $ cens_events: NULL #>  $ cens_time  : num 10 #>  $ sample_size: int 19"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/sim_dte.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","title":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","text":"Simulates survival times delayed treatment effect (DTE) scenario, treatment group experiences delayed onset benefit. Control treatment groups generated exponential Weibull distributions.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/sim_dte.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","text":"","code":"sim_dte(   n_c,   n_t,   lambda_c,   delay_time,   post_delay_HR,   dist = \"Exponential\",   gamma_c = NULL )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/sim_dte.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","text":"n_c number patients control group n_t number patients treatment group lambda_c baseline hazard rate control group delay_time length delay treatment effect begins post_delay_HR hazard ratio delay period dist distribution control group; must one \"Exponential\" (default) \"Weibull\" gamma_c shape parameter Weibull distribution (used dist = \"Weibull\")","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/sim_dte.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","text":"data frame two columns: time Simulated survival times group Group assignment: \"Control\" \"Treatment\" Class: data.frame","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/sim_dte.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulates survival times for a delayed treatment effect (DTE) scenario, where the treatment group experiences a delayed onset of benefit. Control and treatment groups are generated under exponential or Weibull distributions. — sim_dte","text":"","code":"set.seed(123) sim_data <- sim_dte(n_c = 10, n_t = 10, lambda_c = 0.1,                     delay_time = 6, post_delay_HR = 0.6) head(sim_data) #>         time   group #> 1 12.4626282 Control #> 2  2.3787004 Control #> 3  8.9409655 Control #> 4  1.2441037 Control #> 5  0.6137842 Control #> 6 30.8880198 Control"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/survival_test.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate statistical significance on a survival dataset — survival_test","title":"Calculate statistical significance on a survival dataset — survival_test","text":"Performs survival analysis using either standard log-rank test (LRT) weighted log-rank test (WLRT). function estimates hazard ratio determines whether result statistically significant based specified alpha level alternative hypothesis.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/survival_test.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate statistical significance on a survival dataset — survival_test","text":"","code":"survival_test(   data,   analysis_method = \"LRT\",   alternative = \"one.sided\",   alpha = 0.05,   rho = 0,   gamma = 0,   t_star = NULL,   s_star = NULL )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/survival_test.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate statistical significance on a survival dataset — survival_test","text":"data dataframe containing survival data. Must include columns survival time, event status, treatment group. analysis_method Method analysis: \"LRT\" (default) standard log-rank test, \"WLRT\" weighted log-rank test. alternative String specifying alternative hypothesis. Must one \"one.sided\" \"two.sided\" (default). alpha Type error threshold significance testing. rho Rho parameter Fleming-Harrington weighted log-rank test. gamma Gamma parameter Fleming-Harrington weighted log-rank test. t_star Parameter \\(t^*\\) used modestly weighted tests. s_star Parameter \\(s^*\\) used modestly weighted tests.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/survival_test.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate statistical significance on a survival dataset — survival_test","text":"list containing: Signif Logical indicator statistical significance based chosen test alpha level. observed_HR Estimated hazard ratio Cox proportional hazards model.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/survival_test.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate statistical significance on a survival dataset — survival_test","text":"","code":"set.seed(123) df <- data.frame(   survival_time = rexp(40, rate = 0.1),   status = rbinom(40, 1, 0.8),   group = rep(c(\"Control\", \"Treatment\"), each = 20) ) result <- survival_test(df, analysis_method = \"LRT\", alpha = 0.05) str(result) #> List of 3 #>  $ Signif     : logi FALSE #>  $ observed_HR: num 0.646 #>  $ Z          : num 1.21"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Update prior distributions using interim survival data — update_priors","title":"Update prior distributions using interim survival data — update_priors","text":"function updates elicited priors (defined SHELF objects parametric prior distributions) using interim survival data delayed-effect, piecewise-exponential model treatment arm exponential Weibull model control arm.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update prior distributions using interim survival data — update_priors","text":"","code":"update_priors(   data,   control_distribution = \"Exponential\",   control_model,   delay_SHELF,   HR_SHELF,   delay_param_dist,   HR_param_dist,   n_samples = 1000 )"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update prior distributions using interim survival data — update_priors","text":"data data frame containing interim survival data columns: survival_time Observed time randomisation event/censoring. status Event indicator (1 = event, 0 = censored). group Group identifier (e.g., \"Control\", \"Treatment\"). control_distribution Distributional form assumed control arm: either \"Exponential\" (default) \"Weibull\". control_model named list specifying elicited prior control arm. Expected elements depend distribution: lambda_c_SHELF, lambda_c_dist Prior baseline hazard (Exponential). gamma_c_SHELF, gamma_c_dist Prior Weibull shape (applicable). s1_SHELF, s1_dist Prior survival time t_1. parameter_mode Character string indicating parameterisation used eliciting Weibull priors. t_1 Time point survival probability elicited. delay_SHELF SHELF elicitation object encoding prior belief length delay period \\(\\tau\\) treatment arm. HR_SHELF SHELF elicitation object encoding prior belief post-delay hazard ratio. delay_param_dist Parametric form chosen represent prior delay time. HR_param_dist Parametric form chosen represent prior post-delay HR. n_samples Number posterior samples generate (default: 1000).","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update prior distributions using interim survival data — update_priors","text":"data frame containing Monte Carlo samples updated (posterior) distribution model parameters. Columns normally include: lambda_c Posterior samples control hazard parameter. delay_time Posterior samples delay/changepoint time \\(\\tau\\). HR Posterior samples post-delay hazard ratio. gamma_c (control_distribution = \"Weibull\") Posterior samples Weibull shape parameter.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Update prior distributions using interim survival data — update_priors","text":"function performs Bayesian updating delayed-effect model: $$ h_T(t) = \\begin{cases}   \\lambda_c, & t \\le \\tau \\\\   \\lambda_c \\times HR, & t > \\tau \\end{cases} $$ Priors lambda_c, tau, HR constructed elicited distributions using SHELF framework, updated sampling-based posterior inference.","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/update_priors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update prior distributions using interim survival data — update_priors","text":"","code":"if (FALSE) { # \\dontrun{ posterior_df <- update_priors(   data = interim_data,   control_distribution = \"Exponential\",   control_model = control_prior_list,   delay_SHELF = delay_shelf_obj,   HR_SHELF = hr_shelf_obj,   delay_param_dist = \"lognormal\",   HR_param_dist = \"lognormal\",   n_samples = 2000 ) } # }"},{"path":"https://jamesalsbury.github.io/DTEAssurance/reference/utils-pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Package imports — utils-pipe","title":"Package imports — utils-pipe","text":"Package imports","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/news/index.html","id":"dteassurance-101","dir":"Changelog","previous_headings":"","what":"DTEAssurance 1.0.1","title":"DTEAssurance 1.0.1","text":"CRAN release: 2025-10-24 Fixed bug calc_dte_assurance()","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/news/index.html","id":"dteassurance-100","dir":"Changelog","previous_headings":"","what":"DTEAssurance 1.0.0","title":"DTEAssurance 1.0.0","text":"CRAN release: 2025-10-14 Initial CRAN release Added support delayed treatment effects using elicited priors Introduced calc_dte_assurance() fixed designs Introduced calc_dte_assurance_interim() group sequential designs Included interactive Shiny apps design types Added vignettes pkgdown site documentation","code":""},{"path":"https://jamesalsbury.github.io/DTEAssurance/news/index.html","id":"notes-1-0-0","dir":"Changelog","previous_headings":"","what":"Notes","title":"DTEAssurance 1.0.0","text":"functions pass R CMD check 0 errors, 0 warnings, 0 notes.","code":""}]
