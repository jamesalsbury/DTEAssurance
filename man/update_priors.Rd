% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.R
\name{update_priors}
\alias{update_priors}
\title{Update prior distributions using interim survival data}
\usage{
update_priors(data, control_model, effect_model, n_samples = 1000)
}
\arguments{
\item{data}{A data frame containing interim survival data with columns:
\itemize{
\item \code{survival_time} Observed time from randomisation to event/censoring.
\item \code{status} Event indicator (1 = event, 0 = censored).
\item \code{group} Group identifier (e.g., "Control", "Treatment").
}}

\item{control_model}{A named list specifying the control arm survival distribution:
\itemize{
\item \code{dist}: Distribution type ("Exponential" or "Weibull")
\item \code{parameter_mode}: Either "Fixed" or "Distribution"
\item \code{fixed_type}: If "Fixed", specify as "Parameters" or "Landmark"
\item \code{lambda}, \code{gamma}: Scale and shape parameters
\item \code{t1}, \code{t2}: Landmark times
\item \code{surv_t1}, \code{surv_t2}: Survival probabilities at landmarks
\item \code{t1_Beta_a}, \code{t1_Beta_b}, \code{diff_Beta_a}, \code{diff_Beta_b}: Beta prior parameters
}
@param effect_model A named list specifying beliefs about the treatment effect:
\itemize{
\item \code{delay_SHELF}, \code{HR_SHELF}: SHELF objects encoding beliefs
\item \code{delay_dist}, \code{HR_dist}: Distribution types ("hist" by default)
\item \code{P_S}: Probability that survival curves separate
\item \code{P_DTE}: Probability of delayed separation, conditional on separation
}}

\item{n_samples}{Number of posterior samples to generate (default: 1000).}
}
\value{
A data frame containing Monte Carlo samples from the updated (posterior)
distribution of the model parameters. Columns normally include:
\itemize{
\item \code{lambda_c} Posterior samples for the control hazard parameter.
\item \code{delay_time} Posterior samples for the delay/changepoint time \eqn{T}.
\item \code{HR} Posterior samples for the post-delay hazard ratio.
\item \code{gamma_c} (only if \code{control_distribution = "Weibull"})
Posterior samples for the Weibull shape parameter.
}
}
\description{
This function updates elicited priors (defined through SHELF objects and
parametric prior distributions) using interim survival data under a
delayed-effect, piecewise-exponential model for the treatment arm and an
exponential or Weibull model for the control arm.
}
\details{
The function performs Bayesian updating under a delayed-effect model:
\deqn{
h_T(t) =
\begin{cases}
  \lambda_c, & t \le T \\
  \lambda_c \times HR, & t > T
\end{cases}
}

Priors for \code{lambda_c}, \code{T}, and \code{HR} are constructed from
elicited distributions using the SHELF framework, then updated through
sampling-based posterior inference.
}
\examples{
\dontrun{
posterior_df <- update_priors(
  data = interim_data,
  control_distribution = "Exponential",
  control_model = control_prior_list,
  delay_SHELF = delay_shelf_obj,
  HR_SHELF = hr_shelf_obj,
  delay_param_dist = "lognormal",
  HR_param_dist = "lognormal",
  n_samples = 2000
)
}



}
