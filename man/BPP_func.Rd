% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.R
\name{BPP_func}
\alias{BPP_func}
\title{Calculate Bayesian Predictive Probability given interim data and posterior samples}
\usage{
BPP_func(
  data,
  posterior_df,
  control_distribution = "Exponential",
  n_c_planned,
  n_t_planned,
  rec_time_planned,
  df_cens_time,
  censoring_model,
  analysis_model,
  n_sims = 500
)
}
\arguments{
\item{posterior_df}{A data frame of posterior samples with columns:
\code{lambda_c}, \code{delay_time} and \code{HR}, corresponding to the control hazard,
the delay (changepoint) time and the post-delay hazard ratio, respectively.}

\item{control_distribution}{Distributional form assumed for the control arm:
either \code{"Exponential"} (default) or \code{"Weibull"}.}

\item{n_c_planned}{Planned maximum number of patients in the control group.}

\item{n_t_planned}{Planned maximum number of patients in the treatment group.}

\item{rec_time_planned}{Planned maximum recruitment calendar time for the full trial.}

\item{df_cens_time}{Calendar time at which \code{df} has been censored (interim analysis time).}

\item{censoring_model}{A named list specifying the censoring mechanism for the future data:
\itemize{
\item \code{method}: one of \code{"Time"}, \code{"Events"}, or \code{"IF"}.
\item \code{time}, \code{events}, \code{IF}: parameters for the corresponding method.
}}

\item{analysis_model}{A named list specifying the final analysis and decision rule:
\itemize{
\item \code{method}: e.g. \code{"LRT"}, \code{"WLRT"}, or \code{"MW"}.
\item \code{alpha}: one-sided type I error level.
\item \code{alternative_hypothesis}: direction of the alternative (e.g. \code{"one.sided"}).
\item \code{rho}, \code{gamma}, \code{t_star}, \code{s_star}: additional parameters for WLRT or MW (if applicable).
}}

\item{n_sims}{Number of predictive simulations to run (default is 1000).}

\item{df}{A data frame containing interim survival data, censored at \code{df_cens_time}, with columns:
\itemize{
\item \code{time} Final observed/event time at the interim (on the analysis time scale).
\item \code{group} Treatment group indicator (e.g. "Control", "Treatment").
\item \code{rec_time} Recruitment (calendar) time.
\item \code{pseudo_time} \code{time + rec_time} (calendar time at event/censoring).
\item \code{status} Event indicator at the interim (1 = event, 0 = censored).
\item \code{survival_time} Observed follow-up time from randomisation to event/censoring at the interim.
}}
}
\value{
A single numeric value giving the Bayesian predictive probability of success at the final analysis under the specified design, censoring model and analysis model.
}
\description{
Calculate Bayesian Predictive Probability given interim data and posterior samples
}
\examples{
\dontrun{
  BPP_func(df, posterior_df, n_c_planned = 500, n_t_planned = 500,
           rec_time_planned = 34, df_cens_time = 20,
           censoring_model = list(method = "Events", events = 1200),
           analysis_model = list(method = "LRT",
                                 alpha = 0.025,
                                 alternative_hypothesis = "one.sided"))
}
}
